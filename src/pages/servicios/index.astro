---
import Layout from "../../layouts/BasicLayout.astro";
import CardProduct from "../../components/products/product.cards";
import { getCollection } from "astro:content";

const storeData = await getCollection("store");
const products = await getCollection("products");
const pages = await getCollection("pages");

const page = pages.find((p) => p.data?.slug === "products")?.data;

const store = storeData[0]?.data || {};
const storeSEO = store.SEO || {};
---

<Layout
  title={page?.Title || `Servicios, ${store.title}`}
  description={page?.SEO?.metaDescription}
  keywords={page?.SEO?.metaKeywords}
  author={storeSEO.metaAuthor || store?.title}
  ogImage={page?.SEO?.socialImage?.url || store.Logo?.url || store.Cover?.url}
  canonical={page?.SEO?.metaUrl || `/servicios/`}
>
  <main>
    <section class="py-5 bg-light">
      <div class="container">
        <div class="row justify-content-center text-center">
          <div class="col-lg-8">
            <h1 class="display-4 fw-bold mb-3">{page?.Title || "Servicios"}</h1>
            <p class="lead text-muted">
              {page?.SEO?.metaDEscription}
            </p>
          </div>
        </div>
      </div>
    </section>

    <div class="container my-5">
      <section class="mb-5">
        <div class="row">
          {
            products.map((product: any) => (
              <div class="col-md-12 col-lg-6 col-xl-6 mb-4">
                <a
                  href={`/servicios/${product?.data.slug || product.id}`}
                  class="text-decoration-none"
                >
                  <CardProduct product={product?.data} position="center" />
                </a>
              </div>
            ))
          }
        </div>
      </section>

      <section class="my-5">
        <div class="bg-primary text-white rounded-3 p-5 text-center">
          <h3 class="fw-bold mb-3">
            ¿Quieres ser el primero en saber sobre nuevos productos?
          </h3>
          <p class="mb-4">
            Suscríbete a nuestro boletín y mantente al día con las últimas
            novedades
          </p>
          <div class="row justify-content-center">
            <div class="col-md-6">
              <div class="input-group">
                <input
                  type="email"
                  class="form-control"
                  placeholder="Tu email"
                />
                <button class="btn btn-light" type="button">
                  <i class="bi bi-envelope me-1"></i>
                  Suscribirse
                </button>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </main>
</Layout>
